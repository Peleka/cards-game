(this["webpackJsonpcards-game"]=this["webpackJsonpcards-game"]||[]).push([[0],{16:function(e,t,r){e.exports={bgr:"styles_bgr__JQRFe",form:"styles_form__22fGq"}},21:function(e,t,r){e.exports={active:"Header_active__7L8Fu",wrapper:"Header_wrapper__15T7i"}},30:function(e,t,r){e.exports={superInput:"SuperInputText_superInput__hWvzj",errorInput:"SuperInputText_errorInput__KDesT",error:"SuperInputText_error__3SnbI"}},34:function(e,t,r){e.exports={default:"SuperButton_default__3d2r2",red:"SuperButton_red__1pIIf"}},35:function(e,t,r){e.exports={checkbox:"SuperCheckbox_checkbox__m_EV9",spanClassName:"SuperCheckbox_spanClassName__3xdR6"}},51:function(e,t,r){e.exports={authError:"Login_authError__21_mb"}},62:function(e,t,r){},63:function(e,t,r){},87:function(e,t,r){"use strict";r.r(t);var s=r(0),a=r.n(s),n=r(25),c=r.n(n),o=(r(62),r(63),r(21)),i=r.n(o),d=r(9),l=r(5),u=r(1),j=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:"404"}),Object(u.jsx)("div",{children:"Page not found!"}),Object(u.jsx)("div",{children:"\u2014\u0e05/\u1420.\u032b .\u141f\\\u0e05\u2014"})]})},b=r(3),p=r(16),h=r.n(p),m=r(23),O=r(34),f=r.n(O),w=function(e){var t=e.red,r=e.className,s=Object(m.a)(e,["red","className"]),a="".concat(t?f.a.red:f.a.default," ").concat(r);return Object(u.jsx)("button",Object(b.a)({className:a},s))},g=r(35),x=r.n(g),v=function(e){e.type;var t=e.onChange,r=e.onChangeChecked,s=e.className,a=(e.spanClassName,e.children),n=Object(m.a)(e,["type","onChange","onChangeChecked","className","spanClassName","children"]),c="".concat(x.a.checkbox," ").concat(s||"");return Object(u.jsxs)("label",{children:[Object(u.jsx)("input",Object(b.a)({type:"checkbox",onChange:function(e){t&&t(e),r&&r(e.currentTarget.checked)},className:c},n)),a&&Object(u.jsx)("span",{className:x.a.spanClassName,children:a})]})},P=r(30),S=r.n(P),y=function(e){e.type;var t=e.onChange,r=e.onChangeText,s=e.onKeyPress,a=e.onEnter,n=e.error,c=e.className,o=e.spanClassName,i=Object(m.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"]),d="".concat(S.a.error," ").concat(o||""),l="".concat(S.a.superInput," ").concat(n?S.a.errorInput:""," ").concat(c);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("input",Object(b.a)({type:"text",onChange:function(e){t&&t(e),r&&r(e.currentTarget.value)},onKeyPress:function(e){s&&s(e),a&&"Enter"===e.key&&a()},className:l},i)),n&&Object(u.jsx)("span",{className:d,children:n})]})},N=r(4),C=r(48),_=r.n(C).a.create({baseURL:"https://neko-back.herokuapp.com/2.0/",withCredentials:!0}),E=function(e,t,r){return _.post("auth/login",{email:e,password:t,rememberMe:r})},T=function(){return _.delete("auth/me")},k=function(e,t){return _.post("/auth/register",{email:e,password:t})},I=function(e,t){return _.post("/auth/forgot",{email:e,message:t})},A=function(e,t){return _.post("/auth/set-new-password",{password:e,resetPasswordToken:t})},R={status:"idle"},F=function(e){return{type:"APP/SET-STATUS",status:e}},L={isLoggedIn:!1,userData:null,authError:""},D=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},U=function(e){return{type:"login/SET-USER-DATA",payload:e}},G=function(e){try{T().then((function(){e(D(!1)),e(U(null))}))}catch(t){}},q=r(20),M=r(51),W=r.n(M),H=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.auth.isLoggedIn})),r=Object(N.c)((function(e){return e.auth.authError})),s=Object(q.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password||(t.password="Password is required"),t},onSubmit:function(t){e(function(e){return function(t){t(F("loading")),E(e.email,e.password,e.rememberMe).then((function(e){var r={_id:e.data._id,name:e.data.name,email:e.data.email,avatar:e.data.avatar||null,publicCardPacksCount:e.data.publicCardPacksCount};t(U(r)),t(D(!0)),t(F("succeeded"))})).catch((function(e){var r=e.response?e.response.data.error:e.message;t({type:"login/SET-AUTH-ERROR",errorMessage:r}),t(F("failed"))}))}}(t)),s.resetForm()}});return t?Object(u.jsx)(l.a,{to:"/profile"}):Object(u.jsxs)("div",{className:h.a.bgr,children:[Object(u.jsx)("h2",{children:" Login "}),Object(u.jsxs)("form",{onSubmit:s.handleSubmit,className:h.a.form,children:[Object(u.jsx)(y,Object(b.a)({type:"email",placeholder:"E-mail",error:s.touched.email?s.errors.email:null},s.getFieldProps("email"))),Object(u.jsx)(y,Object(b.a)({type:"password",placeholder:"Password",error:s.touched.password?s.errors.password:null},s.getFieldProps("password"))),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{children:[Object(u.jsx)(v,Object(b.a)({},s.getFieldProps("rememberMe"))),"Remember me"]}),Object(u.jsx)("div",{className:W.a.authError,children:r}),Object(u.jsx)(w,{type:"submit",children:"Login"})]}),Object(u.jsx)(d.b,{to:"/forgot-password",children:"Forgot Password"})," ",Object(u.jsx)("br",{}),Object(u.jsx)(d.b,{to:"/register",children:"Sign Up"})]})},Z=function(){return Object(N.c)((function(e){return e.auth.isLoggedIn}))?Object(u.jsx)("div",{children:"Profile"}):Object(u.jsx)(H,{})},V={isRegistered:!1},B=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.register.isRegistered})),r=Object(q.a)({initialValues:{email:"",password:"",confirmedPassword:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address."):t.email="Email is required",e.password?e.password.length<8&&(t.password="Password must be at least 8 symbols"):t.password="Password is required",e.password&&!e.confirmedPassword?t.confirmedPassword="Confirm your password":e.password!==e.confirmedPassword&&(t.confirmedPassword="You entered two different passwords."),t},onSubmit:function(t){t.password===t.confirmedPassword&&(e(function(e){return function(t){t(F("loading")),k(e.email,e.password).then((function(){t({type:"register/SET-SIGN-UP",isRegistered:!0}),t(F("succeeded"))})).catch((function(e){var t=e.response?e.response.data.error:e.message;alert(t)}))}}(t)),r.resetForm())}});return t?Object(u.jsx)(l.a,{to:"./login"}):Object(u.jsxs)("div",{className:h.a.bgr,children:[Object(u.jsx)("h1",{children:"it-incubator"}),Object(u.jsx)("h2",{children:"Sign In"}),Object(u.jsxs)("form",{onSubmit:r.handleSubmit,className:h.a.form,children:[Object(u.jsx)(y,Object(b.a)({type:"email",placeholder:"Email",error:r.touched.email?r.errors.email:null},r.getFieldProps("email"))),Object(u.jsx)(y,Object(b.a)({type:"password",placeholder:"Password",error:r.touched.password?r.errors.password:null},r.getFieldProps("password"))),Object(u.jsx)(y,Object(b.a)({type:"password",placeholder:"Confirm your password",error:r.touched.confirmedPassword?r.errors.confirmedPassword:null},r.getFieldProps("confirmedPassword"))),Object(u.jsxs)("div",{children:[Object(u.jsx)(d.b,{to:"/login",children:Object(u.jsx)(w,{children:" Cancel "})}),Object(u.jsx)(w,{type:"submit",children:" Register "})]})]})]})},K={isNewPassword:!1},$=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.setNewPassword.isNewPassword})),r=Object(l.g)(),s=Object(q.a)({initialValues:{password:"",confirmPassword:""},validate:function(e){var t={};return e.password?e.password.length<8&&(t.password="Password must be at least 8 symbols"):t.password="Password is required",e.password&&!e.confirmPassword?t.confirmPassword="Confirm your password":e.password!==e.confirmPassword&&(t.confirmPassword="You entered two different passwords."),t},onSubmit:function(t){var s,a;e((s=t.password,a=r.token,function(e){e(F("loading")),A(s,a).then((function(){e({type:"setNewPassword/SET-NEW-PASSWORD"}),e(F("succeeded"))})).catch((function(e){var t=e.response?e.response.data.error:e.message;alert(t)}))}))}});return t?Object(u.jsx)(l.a,{to:"/login"}):Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:h.a.bgr,children:[Object(u.jsx)("h1",{children:"it-incubator"}),Object(u.jsx)("h2",{children:"Set new password"}),Object(u.jsxs)("form",{onSubmit:s.handleSubmit,children:[Object(u.jsx)(y,Object(b.a)({type:"password",placeholder:"New password"},s.getFieldProps("password"))),Object(u.jsx)(y,Object(b.a)({type:"password",placeholder:"Confirm your new password",error:s.touched.confirmPassword?s.errors.confirmPassword:null},s.getFieldProps("confirmPassword")))]}),Object(u.jsx)(w,{type:"submit",onClick:function(){alert("blaaay")},children:"Set new password"})]})})},J={recoveredPassword:!1},Y=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.forgotPassword.recoveredPassword})),r=Object(q.a)({initialValues:{email:""},validate:function(e){var t={};return e.email?e.email.length<11&&(t.email="Email should be more 10 symbols"):t.email="Email is required",t},onSubmit:function(t){e(function(e,t){return function(r){r(F("loading")),I(e,t).then((function(){r({type:"recoverPassword/CHANGE-PASSWORD"}),r(F("succeeded"))})).catch((function(e){var t=e.response?e.response.data.error:e.message;alert(t)}))}}(t.email,"<div style=\"background-color: lime; padding: 15px\">\n            password recovery link:\t<a href='https://Peleka.github.io/cards-game/#/new-password/$token$'>link</a>\n            </div>"))}});return Object(u.jsxs)("div",{className:h.a.bgr,children:[Object(u.jsx)("h1",{children:"it-incubator"}),Object(u.jsx)("h2",{children:"Forgot your password?"}),t?Object(u.jsx)(z,{email:r.values.email}):Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:r.handleSubmit,children:[Object(u.jsx)(y,Object(b.a)({type:"email",placeholder:"Email"},r.getFieldProps("email"))),Object(u.jsx)(w,{type:"submit",children:"Send instructions"})]})})]})},z=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:"Check your Email"}),Object(u.jsxs)("span",{children:["click the link in the message in your email ",e.email]})]})},Q=function(){return Object(u.jsxs)("div",{children:["TestPage",Object(u.jsx)(y,{}),Object(u.jsx)(w,{}),Object(u.jsx)(v,{})]})},X="/login",ee="/register",te="/profile",re="/forgot-password",se="/new-password",ae="/test",ne=function(){return Object(u.jsx)("div",{children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{path:"/",exact:!0,render:function(){return Object(u.jsx)(l.a,{to:ae})}}),Object(u.jsx)(l.b,{path:X,render:function(){return Object(u.jsx)(H,{})}}),Object(u.jsx)(l.b,{path:ee,render:function(){return Object(u.jsx)(B,{})}}),Object(u.jsx)(l.b,{path:re,render:function(){return Object(u.jsx)(Y,{})}}),Object(u.jsx)(l.b,{path:se,render:function(){return Object(u.jsx)($,{})}}),Object(u.jsx)(l.b,{path:te,render:function(){return Object(u.jsx)(Z,{})}}),Object(u.jsx)(l.b,{path:ae,render:function(){return Object(u.jsx)(Q,{})}}),Object(u.jsx)(l.b,{render:function(){return Object(u.jsx)(j,{})}})]})})},ce=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.auth.isLoggedIn}));return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:i.a.wrapper,children:[Object(u.jsx)(d.b,{to:X,activeClassName:i.a.active,children:"Login"}),Object(u.jsx)(d.b,{to:ae,activeClassName:i.a.active,children:"Test"}),Object(u.jsx)(d.b,{to:ee,activeClassName:i.a.active,children:"Register"}),Object(u.jsx)(d.b,{to:te,activeClassName:i.a.active,children:"Profile"}),Object(u.jsx)(d.b,{to:re,activeClassName:i.a.active,children:"ForgotPassword"}),Object(u.jsx)(d.b,{to:se,activeClassName:i.a.active,children:"SetNewPassword"}),Object(u.jsx)(w,{onClick:function(){e(G),console.log(t)},children:"Log out"})]})})},oe=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(d.a,{children:[Object(u.jsx)(ce,{}),Object(u.jsx)(ne,{})]})})},ie=r(99),de=function(){var e=Object(N.c)((function(e){return e.app.status}));return Object(u.jsxs)("div",{className:"App",children:["loading"===e&&Object(u.jsx)(ie.a,{}),Object(u.jsx)(oe,{})]})},le=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,100)).then((function(t){var r=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,c=t.getTTFB;r(e),s(e),a(e),n(e),c(e)}))},ue=r(31),je=r(56),be=Object(ue.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:t.value});case"login/SET-USER-DATA":return Object(b.a)(Object(b.a)({},e),{},{userData:t.payload});case"login/SET-AUTH-ERROR":return Object(b.a)(Object(b.a)({},e),{},{authError:t.errorMessage});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register/SET-SIGN-UP":return Object(b.a)(Object(b.a)({},e),{},{isRegistered:t.isRegistered});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(b.a)(Object(b.a)({},e),{},{status:t.status});default:return e}},forgotPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"recoverPassword/CHANGE-PASSWORD":return Object(b.a)(Object(b.a)({},e),{},{recoveredPassword:!0});default:return e}},setNewPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewPassword/SET-NEW-PASSWORD":return Object(b.a)(Object(b.a)({},e),{},{isNewPassword:!0});default:return e}}}),pe=Object(ue.c)(be,Object(ue.a)(je.a)),he=pe;window.store=pe,c.a.render(Object(u.jsx)(N.a,{store:he,children:Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(de,{})})}),document.getElementById("root")),le()}},[[87,1,2]]]);
//# sourceMappingURL=main.f797399e.chunk.js.map